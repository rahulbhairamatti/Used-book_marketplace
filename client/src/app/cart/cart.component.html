<!-- <div class="cart-container">
  <h1>Shopping Cart</h1>

  <div *ngIf="cartItems.length === 0" class="empty-cart-message">
      <p>Your cart is currently empty.</p>
  </div>

  <ul *ngIf="cartItems.length > 0" class="cart-items-list">
      <li *ngFor="let cartItem of cartItems; let i = index" class="cart-item">
          <div class="item-details">
              <div class="book-info">
                  <h3>{{ cartItem.book.title }}</h3>
                  <p>Author: {{ cartItem.book.author }}</p>
                  <p>Genre: {{ cartItem.book.genre }}</p>
                  <p>Condition: {{ cartItem.book.book_condition || 'N/A' }}</p>
                  <p>Price: ${{ cartItem.book.price | number:'1.2-2' }}</p>
              </div>

              <div class="quantity-control">
                  <button (click)="decrementQuantity(cartItem)" [disabled]="cartItem.quantity <= 1">-</button>
                  <span>{{ cartItem.quantity }}</span>
                  <button (click)="incrementQuantity(cartItem)" [disabled]="cartItem.quantity >= cartItem.book.quantity_in_stock">+</button>
              </div>
              <button (click)="removeItem(cartItem)" class="remove-item-button">Remove</button>
          </div>
          <div class="quantity-control">
            <button (click)="cartItem.quantity > 1 ? decrementQuantity(cartItem) : removeItem(cartItem)" class="quantity-button">
                <ng-container *ngIf="cartItem.quantity > 1">-</ng-container>
                <ng-container *ngIf="cartItem.quantity === 1">
                    <i class="fa fa-trash"></i> </ng-container>
            </button>
            <span>{{ cartItem.quantity }}</span>
            <button (click)="incrementQuantity(cartItem)" [disabled]="cartItem.quantity >= cartItem.book.quantity_in_stock" class="quantity-button">+</button>
        </div>
      </li>
  </ul>

  <div *ngIf="cartItems.length > 0" class="cart-summary">
      <h2 class="summary-heading">Order Summary</h2>
      <p>Subtotal: ${{ calculateSubtotal() | number:'1.2-2' }}</p>
      <p>Shipping: ${{ shippingCost | number:'1.2-2' }}</p>
      <p class="total">Total: ${{ calculateTotal() | number:'1.2-2' }}</p>

      <div class="payment-method-selector">
          <label for="paymentMethod">Payment Method:</label>
          <select id="paymentMethod" [(ngModel)]="paymentMethod" class="payment-select">
              <option value="Cash on Delivery">Cash on Delivery</option>
          </select>
      </div>

      <div class="shipping-city-input">
          <label for="shippingCity">Shipping City:</label>
          <input type="text" id="shippingCity" [(ngModel)]="shippingCity" class="city-input" placeholder="Enter City" required>
      </div>
      <div class="checkout-actions">
          <button
              (click)="proceedToCheckout()"
              [disabled]="loadingCheckout || !shippingCity"  class="checkout-button"
          >
              {{ loadingCheckout ? 'Processing...' : 'Proceed to Checkout' }}
          </button>
          <button (click)="clearCart()" class="clear-cart-button">Clear Cart</button>
      </div>

      <div *ngIf="checkoutError" class="error-message">
          {{ checkoutError }}
      </div>
      <div *ngIf="checkoutSuccess" class="success-message">
          Checkout Successful!
      </div>
  </div>
</div> -->
<div class="cart-container">
  <h1 class="cart-title grand-title">Shopping Cart</h1>

  <div *ngIf="cartItems.length === 0" class="empty-cart-message">
      <p>Your cart is currently empty.</p>
  </div>

  <ul *ngIf="cartItems.length > 0" class="cart-items-list">
      <li *ngFor="let cartItem of cartItems; let i = index" class="cart-item">
          <div class="item-details">
              <div class="book-info">
                  <h3>{{ cartItem.book.title }}</h3>
                  <p>Author: {{ cartItem.book.author }}</p>
                  <p>Genre: {{ cartItem.book.genre }}</p>
                  <p>Condition: {{ cartItem.book.book_condition || 'N/A' }}</p>
                  <p>Price: ${{ cartItem.book.price | number:'1.2-2' }}</p>
              </div>

              <div class="quantity-control">
                  <button (click)="cartItem.quantity > 1 ? decrementQuantity(cartItem) : removeItem(cartItem)" class="quantity-button">
                      <ng-container *ngIf="cartItem.quantity > 1">-</ng-container>
                      <ng-container *ngIf="cartItem.quantity === 1">
                          <i class="fa fa-trash"></i>
                      </ng-container>
                  </button>
                  <span>{{ cartItem.quantity }}</span>
                  <button (click)="incrementQuantity(cartItem)" [disabled]="cartItem.quantity >= cartItem.book.quantity_in_stock" class="quantity-button">+</button>
              </div>
              </div>
      </li>
  </ul>

  <div *ngIf="cartItems.length > 0" class="cart-summary">
      <h2 class="summary-heading">Order Summary</h2>
      <p>Subtotal: ${{ calculateSubtotal() | number:'1.2-2' }}</p>
      <p>Shipping: ${{ shippingCost | number:'1.2-2' }}</p>
      <p class="total">Total: ${{ calculateTotal() | number:'1.2-2' }}</p>

      <div class="payment-method-selector">
          <label for="paymentMethod">Payment Method:</label>
          <select id="paymentMethod" [(ngModel)]="paymentMethod" class="payment-select">
              <option value="Cash on Delivery">Cash on Delivery</option>
          </select>
      </div>

      <div class="shipping-city-input">
          <label for="shippingCity" class="shipping-city-label">Shipping City:</label>
          <input type="text" id="shippingCity" [(ngModel)]="shippingCity" class="city-input grand-city" placeholder="Enter City Name" required>
      </div>
      <div class="checkout-actions">
          <button
              (click)="proceedToCheckout()"
              [disabled]="loadingCheckout || !shippingCity" class="checkout-button"
          >
              {{ loadingCheckout ? 'Processing...' : 'Proceed to Checkout' }}
          </button>
          <button (click)="clearCart()" class="clear-cart-button">Clear Cart</button>
      </div>

      <div *ngIf="checkoutError" class="error-message">
          {{ checkoutError }}
      </div>
      <div *ngIf="checkoutSuccess" class="success-message">
          Checkout Successful!
      </div>
  </div>
</div>

<!-- <div class="cart-container">
  <h1>Shopping Cart</h1>

  <div *ngIf="cartItems.length === 0">
      <p>Your cart is empty.</p>
  </div>

  <ul *ngIf="cartItems.length > 0">
      <li *ngFor="let cartItem of cartItems" class="cart-item">
          <div class="item-details">
              <h3>{{ cartItem.book.title }}</h3> <p>Author: {{ cartItem.book.author }}</p> <p>Price: ${{ cartItem.book.price }}</p>  <p>Quantity: {{ cartItem.quantity }}</p>
              </div>
      </li>
  </ul>

  <div *ngIf="cartItems.length > 0" class="cart-summary">
      <p>Subtotal: ${{ calculateSubtotal() | number:'1.2-2' }}</p>
      <p>Shipping: ${{ shippingCost | number:'1.2-2' }}</p>
      <p class="total">Total: ${{ calculateTotal() | number:'1.2-2' }}</p>

      <button (click)="proceedToCheckout()" [disabled]="loadingCheckout">
          {{ loadingCheckout ? 'Processing Checkout...' : 'Proceed to Checkout' }}
      </button>
      <button (click)="clearCart()" class="clear-cart-button">Clear Cart</button>

      <div *ngIf="checkoutError" class="error-message">
          {{ checkoutError }}
      </div>
      <div *ngIf="checkoutSuccess" class="success-message">
          Checkout Successful!
      </div>
  </div>
</div> -->
<!-- <div class="cart-container">
  <h1>Shopping Cart</h1>

  <div *ngIf="cartItems.length === 0">
      <p>Your cart is empty.</p>
  </div>

  <ul *ngIf="cartItems.length > 0">
      <li *ngFor="let cartItem of cartItems" class="cart-item">
          <div class="item-details">
              <div class="book-image">
                  <img [src]="cartItem.book.image_url" alt="{{ cartItem.book.title }}" style="max-width: 100px; max-height: 150px;">
              </div>
              <div class="book-info">
                  <h3>{{ cartItem.book.title }}</h3>
                  <p>Author: {{ cartItem.book.author }}</p>
                  <p>Genre: {{ cartItem.book.genre }}</p>
                  <p>Condition: {{ cartItem.book.book_condition || 'N/A' }}</p>
                  <p>Price: ${{ cartItem.book.price }}</p>
                  <p>Quantity: {{ cartItem.quantity }}</p>
              </div>
          </div>
      </li>
  </ul>

  <div *ngIf="cartItems.length > 0" class="cart-summary">
      <p>Subtotal: ${{ calculateSubtotal() | number:'1.2-2' }}</p>
      <p>Shipping: ${{ shippingCost | number:'1.2-2' }}</p>
      <p class="total">Total: ${{ calculateTotal() | number:'1.2-2' }}</p>
      <div class="payment-method-selector">  <label for="paymentMethod">Payment Method:</label>
        <select id="paymentMethod" [(ngModel)]="paymentMethod">
            <option value="Cash on Delivery">Cash on Delivery</option>
        </select>
    </div>
      <button (click)="proceedToCheckout()" [disabled]="loadingCheckout">
          {{ loadingCheckout ? 'Processing Checkout...' : 'Proceed to Checkout' }}
      </button>
      <button (click)="clearCart()" class="clear-cart-button">Clear Cart</button>

      <div *ngIf="checkoutError" class="error-message">
          {{ checkoutError }}
      </div>
      <div *ngIf="checkoutSuccess" class="success-message">
          Checkout Successful!
      </div>
  </div> -->
  <!-- <div class="cart-container">
    <h1>Shopping Cart</h1>

    <div *ngIf="cartItems.length === 0" class="empty-cart-message">
        <p>Your cart is currently empty.</p>
    </div>

    <ul *ngIf="cartItems.length > 0" class="cart-items-list">
        <li *ngFor="let cartItem of cartItems; let i = index" class="cart-item">
            <div class="item-details">
                <div class="book-info">
                    <h3>{{ cartItem.book.title }}</h3>
                    <p>Author: {{ cartItem.book.author }}</p>
                    <p>Genre: {{ cartItem.book.genre }}</p>
                    <p>Condition: {{ cartItem.book.book_condition || 'N/A' }}</p>
                    <p>Price: ${{ cartItem.book.price | number:'1.2-2' }}</p>
                </div>

                <div class="quantity-control">
                    <button (click)="decrementQuantity(cartItem)" [disabled]="cartItem.quantity <= 1">-</button>
                    <span>{{ cartItem.quantity }}</span>
                    <button (click)="incrementQuantity(cartItem)" [disabled]="cartItem.quantity >= cartItem.book.quantity_in_stock">+</button>
                </div>
                <button (click)="removeItem(cartItem)" class="remove-item-button">Remove</button>
            </div>
        </li>
    </ul>

    <div *ngIf="cartItems.length > 0" class="cart-summary">
        <h2 class="summary-heading">Order Summary</h2>
        <p>Subtotal: ${{ calculateSubtotal() | number:'1.2-2' }}</p>
        <p>Shipping: ${{ shippingCost | number:'1.2-2' }}</p>
        <p class="total">Total: ${{ calculateTotal() | number:'1.2-2' }}</p>

        <div class="payment-method-selector">
            <label for="paymentMethod">Payment Method:</label>
            <select id="paymentMethod" [(ngModel)]="paymentMethod" class="payment-select">
                <option value="Cash on Delivery">Cash on Delivery</option>
            </select>
        </div>

        <div class="checkout-actions">
            <button
                (click)="proceedToCheckout()"
                [disabled]="loadingCheckout"
                class="checkout-button"
            >
                {{ loadingCheckout ? 'Processing...' : 'Proceed to Checkout' }}
            </button>
            <button (click)="clearCart()" class="clear-cart-button">Clear Cart</button>
        </div>

        <div *ngIf="checkoutError" class="error-message">
            {{ checkoutError }}
        </div>
        <div *ngIf="checkoutSuccess" class="success-message">
            Checkout Successful!
        </div>
    </div>
</div> -->
<!-- <h1>Shopping Cart</h1>
<div *ngIf="cartItems.length > 0; else emptyCart">
  <table class="cart-table">
    <thead>
      <tr>
        <th>Title</th>
        <th>Price</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of cartItems">
        <td>{{ item.title }}</td>
        <td>{{ item.price | currency:'USD' }}</td>
      </tr>
    </tbody>
  </table>
  <p>Total items: {{ cartItems.length }}</p>
  <button (click)="clearCart()">Clear Cart</button>
</div>

<ng-template #emptyCart>
  <p>Your cart is empty.</p>
</ng-template> -->
<!-- <div class="shopping-cart">
  <h2>Shopping Cart</h2>

  <div *ngFor="let item of cartItems; let i = index" class="cart-item">
    <div class="product-image">
      <img src="assets/product-placeholder.png" alt="Product Image">  </div>
    <div class="product-details">
      <div class="product-name">{{ item.productName || 'Product Name Example' }}</div> <div class="product-price">${{ item.price.toFixed(2) }}</div>  <div class="quantity-controls">
        <button>-</button>
        <input type="text" value="{{ item.quantity }}" class="quantity-input" readonly> <button>+</button>
      </div>
      <button class="remove-button">Remove</button>
    </div>
  </div>

  <div class="totals-section">
    <div class="subtotal">Subtotal: <span>${{ calculateSubtotal().toFixed(2) }}</span></div>
    <div class="shipping">Shipping: <span>${{ shippingCost.toFixed(2) }}</span></div>
    <div class="total">Total: <span>${{ calculateTotal().toFixed(2) }}</span></div>
  </div>

  <button class="checkout-button">Proceed to Checkout</button>
  <button (click)="clearCart()" class="clear-cart-button">Clear Cart</button>
</div> -->
<!-- <div class="shopping-cart">
  <h2>Shopping Cart</h2>

  <div *ngFor="let item of cartItems; let i = index" class="cart-item">
    <div class="product-image">
      <img src="assets/product-placeholder.png" alt="Product Image">
    </div>
    <div class="product-details">
      <div class="product-name">{{ item.book.title || 'Product Name Example' }}</div>  <div class="product-price">${{ item.book.price.toFixed(2) }}</div> <button class="remove-button">Remove</button>
    </div>
  </div>

  <div class="totals-section">
    <div class="subtotal">Subtotal: <span>${{ calculateSubtotal().toFixed(2) }}</span></div>
    <div class="shipping">Shipping: <span>${{ shippingCost.toFixed(2) }}</span></div>
    <div class="total">Total: <span>${{ calculateTotal().toFixed(2) }}</span></div>
  </div>

  <button class="checkout-button" (click)="proceedToCheckout()">Proceed to Checkout</button>
  <button (click)="clearCart()" class="clear-cart-button">Clear Cart</button>
</div> -->
<!-- <div class="cart-container">
  <h2>Shopping Cart</h2>

  <div *ngIf="cartItems.length === 0">
    <p>Your cart is currently empty.</p>
  </div>

  <ul *ngIf="cartItems.length > 0" class="cart-items-list">
    <li *ngFor="let item of cartItems" class="cart-item">
      <div class="item-details">
        <h3>{{ item.book.title }}</h3>
        <p>Author: {{ item.book.author }}</p>
        <p>Price: ${{ item.book.price }}</p>
        <p>Quantity: {{ item.quantity }}</p>
      </div>
    </li>
  </ul>

  <div *ngIf="cartItems.length > 0" class="cart-summary">
    <p>Subtotal: ${{ calculateSubtotal() }}</p>
    <p>Shipping: ${{ shippingCost }}</p>
    <p class="total">Total: ${{ calculateTotal() }}</p>

    <div class="payment-method-selector">
      <label for="paymentMethod">Payment Method:</label>
      <select id="paymentMethod" [(ngModel)]="paymentMethod">
        <option value="Cash on Delivery">Cash on Delivery</option>
        </select>
    </div>

    <button (click)="proceedToCheckout()" class="checkout-button" [disabled]="loadingCheckout">
      <span *ngIf="!loadingCheckout">Proceed to Checkout</span>
      <span *ngIf="loadingCheckout">Checking Out...</span>
    </button>
    <button (click)="clearCart()" class="clear-cart-button">Clear Cart</button>
  </div>

  <div *ngIf="checkoutError" class="error-message">
    <strong>Checkout Error:</strong> {{ checkoutError }}
  </div>

  <div *ngIf="checkoutSuccess" class="success-message">
    <strong>Checkout Successful!</strong> Order placed. Check your order history for details.
  </div>
</div> -->
<!-- <div class="cart-container">
  <h1>Shopping Cart</h1>

  <div *ngIf="cartItems.length === 0">
    <p>Your cart is currently empty.</p>
  </div>

  <ul *ngIf="cartItems.length > 0" class="cart-items-list">
    <li *ngFor="let cartItem of cartItems; let i = index" class="cart-item">
      <div class="item-details">
        <div class="book-image">
         
        </div>
        <div class="book-info">
          <h3>{{ cartItem.book.title }}</h3>
          <p>Author: {{ cartItem.book.author }}</p>
          <p>Genre: {{ cartItem.book.genre }}</p>
          <p>Condition: {{ cartItem.book.book_condition || 'N/A' }}</p> <p>Price: ${{ cartItem.book.price | number:'1.2-2' }}</p>
          <p>Quantity: {{ cartItem.quantity }}</p>
        </div>
      </div>
    </li>
  </ul>

  <div *ngIf="cartItems.length > 0" class="cart-summary">
    <h2 class="summary-heading">Order Summary</h2>
    <p>Subtotal: ${{ calculateSubtotal() | number:'1.2-2' }}</p>
    <p>Shipping: ${{ shippingCost | number:'1.2-2' }}</p>
    <p class="total">Total: ${{ calculateTotal() | number:'1.2-2' }}</p>

    <div class="payment-method-selector">
      <label for="paymentMethod">Payment Method:</label>
      <select id="paymentMethod" [(ngModel)]="paymentMethod">
        <option value="Cash on Delivery">Cash on Delivery</option>
      </select>
    </div>

    <div class="checkout-actions">
      <button
        (click)="proceedToCheckout()"
        [disabled]="loadingCheckout"
        class="checkout-button"
      >
        {{ loadingCheckout ? 'Processing...' : 'Proceed to Checkout' }}
      </button>
      <button (click)="clearCart()" class="clear-cart-button">Clear Cart</button>
    </div>

    <div *ngIf="checkoutError" class="error-message">
      {{ checkoutError }}
    </div>
    <div *ngIf="checkoutSuccess" class="success-message">
      Checkout Successful!
    </div>
  </div>
</div> -->
<!-- <div class="cart-container">
  <h1>Shopping Cart</h1>

  <div *ngIf="cartItems.length === 0" class="empty-cart-message">
      <p>Your cart is currently empty.</p>
  </div>

  <ul *ngIf="cartItems.length > 0" class="cart-items-list">
      <li *ngFor="let cartItem of cartItems; let i = index" class="cart-item">
          <div class="item-details">
             
              </div>
              <div class="book-info">
                  <h3>{{ cartItem.book.title }}</h3>
                  <p>Author: {{ cartItem.book.author }}</p>
                  <p>Genre: {{ cartItem.book.genre }}</p>
                  <p>Condition: {{ cartItem.book.book_condition || 'N/A' }}</p>
                  <p>Price: ${{ cartItem.book.price | number:'1.2-2' }}</p>
                  <p>Quantity: {{ cartItem.quantity }}</p>
              </div>
          </div>
      </li>
  </ul>

  <div *ngIf="cartItems.length > 0" class="cart-summary">
      <h2 class="summary-heading">Order Summary</h2>
      <p>Subtotal: ${{ calculateSubtotal() | number:'1.2-2' }}</p>
      <p>Shipping: ${{ shippingCost | number:'1.2-2' }}</p>
      <p class="total">Total: ${{ calculateTotal() | number:'1.2-2' }}</p>

      <div class="payment-method-selector">
          <label for="paymentMethod">Payment Method:</label>
          <select id="paymentMethod" [(ngModel)]="paymentMethod" class="payment-select">
              <option value="Cash on Delivery">Cash on Delivery</option>
          </select>
      </div>

      <div class="checkout-actions">
          <button
              (click)="proceedToCheckout()"
              [disabled]="loadingCheckout"
              class="checkout-button"
          >
              {{ loadingCheckout ? 'Processing...' : 'Proceed to Checkout' }}
          </button>
          <button (click)="clearCart()" class="clear-cart-button">Clear Cart</button>
      </div>

      <div *ngIf="checkoutError" class="error-message">
          {{ checkoutError }}
      </div>
      <div *ngIf="checkoutSuccess" class="success-message">
          Checkout Successful!
      </div>
  </div>
</div> -->
<!-- <div class="cart-container">
  <h1>Shopping Cart</h1>

  <div *ngIf="cartItems.length === 0" class="empty-cart-message">
      <p>Your cart is currently empty.</p>
  </div>
  
  <ul *ngIf="cartItems.length > 0" class="cart-items-list">
      <li *ngFor="let cartItem of cartItems; let i = index" class="cart-item">
          <div class="item-details">
            
              <div class="book-info">
                  <h3>{{ cartItem.book.title }}</h3>
                  <p>Author: {{ cartItem.book.author }}</p>
                  <p>Genre: {{ cartItem.book.genre }}</p>
                  <p>Condition: {{ cartItem.book.book_condition || 'N/A' }}</p>
                  <p>Price: ${{ cartItem.book.price | number:'1.2-2' }}</p>
                  <p>Quantity: {{ cartItem.quantity }}</p>
              </div>
          </div>
      </li>
  </ul>

  <div *ngIf="cartItems.length > 0" class="cart-summary">
      <h2 class="summary-heading">Order Summary</h2>
      <p>Subtotal: ${{ calculateSubtotal() | number:'1.2-2' }}</p>
      <p>Shipping: ${{ shippingCost | number:'1.2-2' }}</p>
      <p class="total">Total: ${{ calculateTotal() | number:'1.2-2' }}</p>

      <div class="payment-method-selector">
          <label for="paymentMethod">Payment Method:</label>
          <select id="paymentMethod" [(ngModel)]="paymentMethod" class="payment-select">
              <option value="Cash on Delivery">Cash on Delivery</option>
          </select>
      </div>

      <div class="checkout-actions">
          <button
              (click)="proceedToCheckout()"
              [disabled]="loadingCheckout"
              class="checkout-button"
          >
              {{ loadingCheckout ? 'Processing...' : 'Proceed to Checkout' }}
          </button>
          <button (click)="clearCart()" class="clear-cart-button">Clear Cart</button>
      </div>

      <div *ngIf="checkoutError" class="error-message">
          {{ checkoutError }}
      </div>
      <div *ngIf="checkoutSuccess" class="success-message">
          Checkout Successful!
      </div>
  </div>
</div> -->
<!-- <div class="cart-container">
  <h1>Shopping Cart</h1>

  <div *ngIf="cartItems.length === 0" class="empty-cart-message">
      <p>Your cart is currently empty.</p>
  </div>

  <ul *ngIf="cartItems.length > 0" class="cart-items-list">
      <li *ngFor="let cartItem of cartItems; let i = index" class="cart-item">
          <div class="item-details">
              <div class="book-image">
                 
                  />
              </div>
              <div class="book-info">
                  <h3>{{ cartItem.book.title }}</h3>
                  <p>Author: {{ cartItem.book.author }}</p>
                  <p>Genre: {{ cartItem.book.genre }}</p>
                  <p>Condition: {{ book.book_condition || 'N/A' }}</p>
                  <p>Price: ${{ cartItem.book.price | number:'1.2-2' }}</p>
                  <p>Quantity: {{ cartItem.quantity }}</p>
              </div>
          </div>
      </li>
  </ul>
 
  <div *ngIf="cartItems.length > 0" class="cart-summary">
      <h2 class="summary-heading">Order Summary</h2>
      <p>Subtotal: ${{ calculateSubtotal() | number:'1.2-2' }}</p>
      <p>Shipping: ${{ shippingCost | number:'1.2-2' }}</p>
      <p class="total">Total: ${{ calculateTotal() | number:'1.2-2' }}</p>

     

      <div class="checkout-actions">
          <button
              (click)="proceedToCheckout()"
              [disabled]="loadingCheckout"
              class="checkout-button"
          >
              {{ loadingCheckout ? 'Processing...' : 'Proceed to Checkout' }}
          </button>
          <button (click)="clearCart()" class="clear-cart-button">Clear Cart</button>
      </div>

      <div *ngIf="checkoutError" class="error-message">
          {{ checkoutError }}
      </div>
      <div *ngIf="checkoutSuccess" class="success-message">
          Checkout Successful!
      </div>
  </div>
</div> -->